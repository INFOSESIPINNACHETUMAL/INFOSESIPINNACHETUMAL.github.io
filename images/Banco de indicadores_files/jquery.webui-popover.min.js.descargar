(function(n,t,i){function e(t,i){this.$element=n(t);(n.type(i.delay)==="string"||n.type(i.delay)==="number")&&(i.delay={show:i.delay,hide:i.delay});this.options=n.extend({},o,i);this._defaults=o;this._name=r;n.type(i.pluginName2)==="string"&&(r=i.pluginName2);this._targetclick=!1;this.init()}var r="webuiPopover",u="webui-popover",f="webui.popover",o={pluginName2:"webuiPopover",placement:"auto",width:"auto",height:"auto",trigger:"click",style:"",delay:{show:null,hide:null},async:{before:null,success:null},cache:!0,multi:!1,arrow:!0,title:"",content:"",closeable:!1,padding:!0,url:"",type:"html",constrains:null,animation:null,template:'<div class="webui-popover"><div class="arrow"><\/div><div class="webui-popover-inner"><a href="#" class="close">x<\/a><h3 class="webui-popover-title"><\/h3><div class="webui-popover-content"><i class="icon-refresh"><\/i> <p>&nbsp;<\/p><\/div><\/div><\/div>'},s;r=o.pluginName2;s=0;e.prototype={init:function(){if(this.getTrigger()==="click")this.$element.off("click").on("click",n.proxy(this.toggle,this));else this.$element.off("mouseenter mouseleave click").on("mouseenter",n.proxy(this.mouseenterHandler,this)).on("mouseleave",n.proxy(this.mouseleaveHandler,this)).on("click",function(n){n.stopPropagation()});this._poped=!1;this._inited=!0;this._idSeed=s;s++},destroy:function(){this.hide();this.$element.data("plugin_"+r,null);this.getTrigger()==="click"?this.$element.off("click"):this.$element.off("mouseenter mouseleave");this.$target&&this.$target.remove()},hide:function(t){t&&(t.preventDefault(),t.stopPropagation());this.xhr&&(this.xhr.abort(),this.xhr=null);var i=n.Event("hide."+f);this.$element.trigger(i);this.$target&&this.$target.removeClass("in").hide();this.$element.trigger("hidden."+f)},toggle:function(n){n&&(n.preventDefault(),n.stopPropagation());this[this.getTarget().hasClass("in")?"hide":"show"]()},hideAll:function(){n("div.webui-popover").not(".webui-popover-fixed").removeClass("in").hide()},show:function(){var n=this.getTarget().removeClass().addClass(u);if(this.options.multi||this.hideAll(),!this.getCache()||!this._poped){if(this.content="",this.setTitle(this.getTitle()),this.options.closeable||n.find(".close").off("click").remove(),this.isAsync()){this.setContentASync(this.options.content);this.displayContent();return}this.setContent(this.getContent());n.show()}this.displayContent();this.bindBodyEvents()},displayContent:function(){var c=this.getElementPosition(),t=this.getTarget().removeClass().addClass(u),e=this.getContentElement(),l=t[0].offsetWidth,a=t[0].offsetHeight,o="bottom",v=n.Event("show."+f),r,s,h;this.$element.trigger(v);this.options.width!=="auto"&&t.width(this.options.width);this.options.height!=="auto"&&e.height(this.options.height);this.options.arrow||t.find(".arrow").remove();t.remove().css({top:-1e3,left:-1e3,display:"block"});this.getAnimation()&&t.addClass(this.getAnimation());t.appendTo(i.body);l=t[0].offsetWidth;a=t[0].offsetHeight;o=this.getPlacement(c);this.initTargetEvents();r=this.getTargetPositin(c,o,l,a);this.$target.css(r.position).addClass(o).addClass("in");this.options.type==="iframe"&&(s=t.find("iframe"),s.width(t.width()).height(s.parent().height()));this.options.style&&this.$target.addClass(u+"-"+this.options.style);this.options.padding||(e.css("height",e.outerHeight()),this.$target.addClass("webui-no-padding"));this.options.arrow||this.$target.css({margin:0});this.options.arrow&&(h=this.$target.find(".arrow"),h.removeAttr("style"),r.arrowOffset&&h.css(r.arrowOffset));this._poped=!0;this.$element.trigger("shown."+f)},isTargetLoaded:function(){return this.getTarget().find("i.glyphicon-refresh").length===0},getTriggerElement:function(){return this.$element},getTarget:function(){if(!this.$target){var t=r+this._idSeed;this.$target=n(this.options.template).attr("id",t).data("trigger-element",this.getTriggerElement());this.getTriggerElement().attr("data-target",t)}return this.$target},getTitleElement:function(){return this.getTarget().find("."+u+"-title")},getContentElement:function(){return this.getTarget().find("."+u+"-content")},getTitle:function(){return this.$element.attr("data-title")||this.options.title||this.$element.attr("title")},getUrl:function(){return this.$element.attr("data-url")||this.options.url},getCache:function(){var n=this.$element.attr("data-cache");if(typeof n!="undefined")switch(n.toLowerCase()){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":return!1}return this.options.cache},getTrigger:function(){return this.$element.attr("data-trigger")||this.options.trigger},getDelayShow:function(){var n=this.$element.attr("data-delay-show");return typeof n!="undefined"?n:this.options.delay.show||100},getHideDelay:function(){var n=this.$element.attr("data-delay-hide");return typeof n!="undefined"?n:this.options.delay.hide||100},getConstrains:function(){var n=this.$element.attr("data-contrains");return typeof n!="undefined"?n:this.options.constrains},getAnimation:function(){var n=this.$element.attr("data-animation");return n||this.options.animation},setTitle:function(n){var t=this.getTitleElement();n?t.html(n):t.remove()},hasContent:function(){return this.getContent()},getContent:function(){if(this.getUrl())this.options.type==="iframe"&&(this.content=n('<iframe frameborder="0"><\/iframe>').attr("src",this.getUrl()));else if(!this.content){var t="";t=n.isFunction(this.options.content)?this.options.content.apply(this.$element[0],arguments):this.options.content;this.content=this.$element.attr("data-content")||t}return this.content},setContent:function(n){var t=this.getTarget();this.getContentElement().html(n);this.$target=t},isAsync:function(){return this.options.type==="async"},setContentASync:function(t){var i=this;this.xhr=n.ajax({url:this.getUrl(),type:"GET",cache:this.getCache(),beforeSend:function(n){i.options.async.before&&i.options.async.before(i,n)},success:function(r){i.bindBodyEvents();i.content=t&&n.isFunction(t)?t.apply(i.$element[0],[r]):r;i.setContent(i.content);var u=i.getContentElement();u.removeAttr("style");i.displayContent();i.options.async.success&&i.options.async.success(i,r);this.xhr=null}})},bindBodyEvents:function(){n("body").off("keyup.webui-popover").on("keyup.webui-popover",n.proxy(this.escapeHandler,this));n("body").off("click.webui-popover").on("click.webui-popover",n.proxy(this.bodyClickHandler,this))},mouseenterHandler:function(){var n=this;n._timeout&&clearTimeout(n._timeout);n._enterTimeout=setTimeout(function(){n.getTarget().is(":visible")||n.show()},this.getDelayShow())},mouseleaveHandler:function(){var n=this;clearTimeout(n._enterTimeout);n._timeout=setTimeout(function(){n.hide()},this.getHideDelay())},escapeHandler:function(n){n.keyCode===27&&this.hideAll()},bodyClickHandler:function(){this._targetclick?this._targetclick=!1:this.hideAll()},targetClickHandler:function(){this._targetclick=!0},initTargetEvents:function(){if(this.getTrigger()!=="click")this.$target.off("mouseenter mouseleave").on("mouseenter",n.proxy(this.mouseenterHandler,this)).on("mouseleave",n.proxy(this.mouseleaveHandler,this));this.$target.find(".close").off("click").on("click",n.proxy(this.hide,this));this.$target.off("click.webui-popover").on("click.webui-popover",n.proxy(this.targetClickHandler,this))},getPlacement:function(n){var o,s=i.documentElement,c=i.body,f=s.clientWidth,t=s.clientHeight,l=Math.max(c.scrollTop,s.scrollTop),a=Math.max(c.scrollLeft,s.scrollLeft),e=Math.max(0,n.left-a),r=Math.max(0,n.top-l),u,h;return o=typeof this.options.placement=="function"?this.options.placement.call(this,this.getTarget()[0],this.$element[0]):this.$element.data("placement")||this.options.placement,o==="auto"&&(u=this.getConstrains()==="horizontal",h=this.getConstrains()==="vertical",o=e<f/3?r<t/3?u?"right-bottom":"bottom-right":r<t*2/3?h?r<=t/2?"bottom-right":"top-right":"right":u?"right-top":"top-right":e<f*2/3?r<t/3?u?e<=f/2?"right-bottom":"left-bottom":"bottom":r<t*2/3?u?e<=f/2?"right":"left":r<=t/2?"bottom":"top":u?e<=f/2?"right-top":"left-top":"top":r<t/3?u?"left-bottom":"bottom-left":r<t*2/3?h?r<=t/2?"bottom-left":"top-left":"left":u?"left-top":"top-left"),o},getElementPosition:function(){return n.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTargetPositin:function(n,t,i,r){var u=n,h=this.$element.outerWidth(),c=this.$element.outerHeight(),f={},e=null,l=this.options.arrow?20:0,o=h<l+10?l:0,s=c<l+10?l:0;switch(t){case"bottom":f={top:u.top+u.height,left:u.left+u.width/2-i/2};break;case"top":f={top:u.top-r,left:u.left+u.width/2-i/2};break;case"left":f={top:u.top+u.height/2-r/2,left:u.left-i};break;case"right":f={top:u.top+u.height/2-r/2,left:u.left+u.width};break;case"top-right":f={top:u.top-r,left:u.left-o};e={left:Math.min(h,i)/2+o};break;case"top-left":f={top:u.top-r,left:u.left-i+u.width+o};e={left:i-Math.min(h,i)/2-o};break;case"bottom-right":f={top:u.top+u.height,left:u.left-o};e={left:Math.min(h,i)/2+o};break;case"bottom-left":f={top:u.top+u.height,left:u.left-i+u.width+o};e={left:i-Math.min(h,i)/2-o};break;case"right-top":f={top:u.top-r+u.height+s,left:u.left+u.width};e={top:r-Math.min(c,r)/2-s};break;case"right-bottom":f={top:u.top-s,left:u.left+u.width};e={top:Math.min(c,r)/2+s};break;case"left-top":f={top:u.top-r+u.height+s,left:u.left-i};e={top:r-Math.min(c,r)/2-s};break;case"left-bottom":f={top:u.top-s,left:u.left-i};e={top:Math.min(c,r)/2+s}}return{position:f,arrowOffset:e}}};n.fn[r]=function(t){return this.each(function(){var i=n.data(this,"plugin_"+r);i?t==="destroy"?i.destroy():typeof t=="string"&&i[t]():(t?typeof t=="string"?t!=="destroy"&&(i=new e(this,null),i[t]()):typeof t=="object"&&(i=new e(this,t)):i=new e(this,null),n.data(this,"plugin_"+r,i))})}})(jQuery,window,document);
/*
//# sourceMappingURL=jquery.webui-popover.min.js.map
*/